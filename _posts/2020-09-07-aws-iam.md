---
title: "[AWS Certified SAP] IAM"
date: 2020-09-07 11:26:28 +0900
categories: aws
---

## IAM

`IAM`에서 알아두어야 할 용어는 다음과 같다.

- Users
  - 주로 AWS 계정당 하나의 유저를 부여함. (ex: beygee User를 만들어 내 계정에 부여함.)
- Groups
  - Admin, Developer, Sys 등 권한을 동일하게 부여해야하는 유저군을 묶을 때 이용. (필수)
- Roles
  - Role은 AWS Service에 붙을 수도, User에 붙을 수도 있음.
  - Short-term으로 `STS`를 이용할 수 있음.
- Policies
  - 직접적으로 AWS 서비스를 이용할 때 필요한 권한을 주는 최소 단위
  - AWS Managed와 Customer Managed가 있다.
  - Inline Policies를 만들어 하나의 유저 또는 인스턴스에 붙일 수 있다.
- Resources Based Policies **(S3, SNS, SQS)**

## IAM Policies Deep Dive

IAM Policies는 JSON 형태로 이루어져 있다.

- `DENY`가 `ALLOW` 보다 우선순위가 높다.
- Best Practice: 최소 권한만 주어 보안을 최대한 강화한다.
- **Access Advisor**를 통하여 가장 최신에 접근한 날짜를 파악할 수 있다.
- **[Access Analyzer](https://aws.amazon.com/ko/blogs/korea/new-use-aws-iam-access-analyzer-in-aws-organizations/)**를 통해 S3, IAM, KMS등 리소스에 허용되는 권한을 분석하여 해당 리소스에 접근할 수 있는 내부/외부 이용자를 파악할 수 있다. (의도치 않은 과도한 정책 허용을 방지한다.)


### NotAction

IAM Policies JSON을 편집하면서 `Action` 대신 `NotAction`이라는 key 값을 사용할 수 있다.

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "iam:*",
                "organizations:*",
                "account:*"
            ],
            "Resource": "*"
        }
    ]
}
```

위의 예제에서 의미하는 바는, **iam, organizations, account** 명령어를 **허용** 한다는 것이다.